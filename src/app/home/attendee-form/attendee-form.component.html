<form [formGroup]="attendeeForm">
  <div
    class="text-center" 
    *ngIf="attendeesArray.controls.length === 0">
    Brak uczestników!
  </div>
  <div 
    class="attendee-container w-full mb-6" 
    *ngFor="let group of attendeesArray.controls; let i = index" 
    formArrayName="attendees">
    <hr>
    <div 
      [formGroupName]="i" 
      class="grid gap-2 mt-2">
      <div>
        <div class="text-xs">Imię</div>
        <input type="text" class="name" formControlName="name">
        <div
          *ngIf="
            group.get('name').touched && 
            group.get('name').errors as errors" 
          class="text-xs errors">
          <div *ngIf="errors['required']">
            Pole wymagane*
          </div>
        </div>
      </div>
      <div>
        <div class="text-xs">Email</div>
        <input type="text" class="email" formControlName="email">
        <div
          *ngIf="
            group.get('email').touched && 
            group.get('email').errors as errors" 
          class="text-xs errors">
          <div *ngIf="errors['required']">
            Pole wymagane*
          </div>
          <div *ngIf="errors['email']">
            Niepoprawny format*
          </div>
        </div>
      </div>
      <i 
        (click)="removeAttendee(i)" 
        class="fa-solid fa-circle-xmark col-start-3 row-start-1 row-end-3"></i>
      <div class="col-start-1 col-end-3">
        <div class="text-xs">Preferowane prezenty (opcjonalne)</div>
        <input 
          type="text" 
          class="preferredGifts" 
          formControlName="preferredGifts">
      </div>
    </div>
  </div>
</form>
<div class="flex mt-5 flex-col">
  <div
    class="m-auto errors"
    *ngIf="attendeeForm.get('attendees').errors as errors">
    <div *ngIf="!errors['arrayLengthIsEven'] && attendeesArray.controls.length > 0">
      Liczba uczestników losowania musi być parzysta!
    </div>
  </div>
  <button 
    class="add-attendee btn m-auto" 
    (click)="addAttendee()">
    Dodaj <i class="fa-solid fa-plus text-xs"></i>
  </button>
</div>